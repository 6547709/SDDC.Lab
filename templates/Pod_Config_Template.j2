{#
 #      Filename: templates/Pod_Config_Template.j2
 #    Created By: Luis Chanu & Rutger Blom
 #       Part Of: https://github.com/rutgerblom/vsphere-nsxt-lab-deploy
 #}

ToDo:
  Create Software Folder and file variables

---
##################################################################################################################
##                                                                                                              ##
##                       # # # DO NOT MODIFY THIS FILE -- IT IS AUTOMATICALLY GENERATED # # #                   ##
##                                                                                                              ##
## This file is automatically generated by the ansible script CreatePodConfig.  You should make all of your     ##
## configuration changes in the "Pod-Config.yml" file, which is used as the source to generate this file.       ##
## To generate this configuration, run the following command from the project's main folder:                    ##
##                                                                                                              ##
##                               ansible-playbook playbooks/createPodConfig.yml                                 ##
##                                                                                                              ##
##################################################################################################################
##
##   Pod #: {{ Pod.Number }}
##
DEBUG:
  KeepConfigFiles: {{ DEBUG.KeepConfigFiles }}
  KeepInstallerFiles: {{ DEBUG.KeepInstallerFiles }}
  DisplayVariables: {{ DEBUG.DisplayVariables }}
  DisplayVariables_DNS: {{ DEBUG.DisplayVariables_DNS }}
  DisplayDelayInSeconds: {{ DEBUG.DisplayDelayInSeconds }}


Pod:
  Number: {{ Pod.Number }}
  BaseNetwork:
    IPv4: "{{ Pod.BaseNetwork.IPv4 }}"
    IPv6: "{{ Pod.BaseNetwork.IPv6 }}"


Deploy:
  Router: {{ Deploy.Router }}
  NSXT:
    GlobalManager: {{ Deploy.NSXT.GlobalManager }}
    LocalManager: {{ Deploy.NSXT.LocalManager }}
    CloudServicesManager: {{ Deploy.NSXT.cloudServicesManager }}
    Edge: {{ Deploy.NSXT.GlobalManager }}
  IPv4: {{ Deploy.IPv4 }}
  IPv6: {{ Deploy.IPv6 }}
  UseNFS: {{ Deploy.UseNFS }}
  UseDNS: {{ Deploy.UseDNS }}
  EnableSSH: {{ Deploy.EnableSSH }}
  Software:
    Options:
      UseLocalInstaller: {{ Deploy.Options.UseLocalInstaller }}
      KeepNewInstallers: {{ Deploy.Options.KeepNewInstallers }}
    vCenter:
      Vendor:    "{{ Deploy.Software.vCenter.Vendor }}"
      Product:   "{{ Deploy.Software.vCenter.Product }}"
      Version:   "{{ Deploy.Software.vCenter.Version }}"
      Patch:     {{ Deploy.Software.vCenter.Patch }}
      Config:    "{{ Deploy.Software.vCenter.Config }}"
      Installer: "{{ Deploy.Software.vCenter.Installer }}"
      Template:
        vCenter: "{{ Software[Deploy.Software.vCenter.Vendor][Deploy.Software.vCenter.Product]['Installers'][Deploy.Software.vCenter.Version]['Template'].vCenter }}"
        ESXi:    "{{ Software[Deploy.Software.vCenter.Vendor][Deploy.Software.vCenter.Product]['Installers'][Deploy.Software.vCenter.Version]['Template'].ESXi }}"
      Directory: "{{ Software[Deploy.Software.vCenter.Vendor][Deploy.Software.vCenter.Product]['Installers'][Deploy.Software.vCenter.Version]['Location'].Local }}"
      File:      "{{ Software[Deploy.Software.vCenter.Vendor][Deploy.Software.vCenter.Product]['Installers'][Deploy.Software.vCenter.Version].File }}"
    ESXi:
      Vendor:    "{{ Deploy.Software.ESXi.Vendor }}"
      Product:   "{{ Deploy.Software.ESXi.Product }}"
      Version:   "{{ Deploy.Software.ESXi.Version }}"
      Patch:     {{ Deploy.Software.ESXi.Patch }}
      Config:    "{{ Deploy.Software.ESXi.Config }}"
      Installer: "{{ Deploy.Software.ESXi.Installer }}"
      Template:  "{{ Software[Deploy.Software.ESXi.Vendor][Deploy.Software.ESXi.Product]['Installers'][Deploy.Software.ESXi.Version].Template }}"
      Directory: "{{ Software[Deploy.Software.ESXi.Vendor][Deploy.Software.ESXi.Product]['Installers'][Deploy.Software.ESXi.Version]['Location'].Local }}"
      File:      "{{ Software[Deploy.Software.ESXi.Vendor][Deploy.Software.ESXi.Product]['Installers'][Deploy.Software.ESXi.Version].File }}"
      vSwitch:   "{{ Software[Deploy.Software.ESXi.Vendor][Deploy.Software.ESXi.Product]['Installers'][Deploy.Software.ESXi.Version].vSwitch }}"
    NSXT:
      Vendor:    "{{ Deploy.Software.NSXT.Vendor }}"
      Product:   "{{ Deploy.Software.NSXT.Product }}"
      Version:   "{{ Deploy.Software.NSXT.Version }}"
      Patch:     {{ Deploy.Software.NSXT.Patch }}
      Config:    "{{ Deploy.Software.NSXT.Config }}"
      Installer: "{{ Deploy.Software.NSXT.Installer }}"
      Template:  "{{ Software[Deploy.Software.NSXT.Vendor][Deploy.Software.NSXT.Product]['Installers'][Deploy.Software.NSXT.Version].Template }}"
      Directory: "{{ Software[Deploy.Software.NSXT.Vendor][Deploy.Software.NSXT.Product]['Installers'][Deploy.Software.NSXT.Version]['Location'].Local }}"
      File:      "{{ Software[Deploy.Software.NSXT.Vendor][Deploy.Software.NSXT.Product]['Installers'][Deploy.Software.NSXT.Version].File }}"
    Router:
      Vendor:    "{{ Deploy.Software.Router.Vendor }}"
      Product:   "{{ Deploy.Software.Router.Product }}"
      Version:   "{{ Deploy.Software.Router.Version }}"
      Patch:     {{ Deploy.Software.Router.Patch }}
      Config:    "{{ Deploy.Software.Router.Config }}"
      Installer: "{{ Deploy.Software.Router.Installer }}"
      Template:  "{{ Software[Deploy.Software.Router.Vendor][Deploy.Software.Router.Product]['Installers'][Deploy.Software.Router.Version].Template }}"
      Directory: "{{ Software[Deploy.Software.Router.Vendor][Deploy.Software.Router.Product]['Installers'][Deploy.Software.Router.Version]['Location'].Local }}"
      File:      "{{ Software[Deploy.Software.Router.Vendor][Deploy.Software.Router.Product]['Installers'][Deploy.Software.Router.Version].File }}"
      URL:       "{{ Software[Deploy.Software.Router.Vendor][Deploy.Software.Router.Product]['Installers'][Deploy.Software.Router.Version]['Location'].URL }}"


##
## The 'Common' section are settings used by the various nested lab components, except for the Nested_Router.
## The physical real-world NTP time server that is used to obtain time for the lab is defined in the Nested_Router section.
## The DNS servers listed delow MUST be able to resolve DNS names on the public Internet.
##
Common:
  Password:
    Nested:   "{{ Common.Password.Nested }}"
    Physical: "{{ Common.Password.Physical }}"
  DNS:
    Domain: "{{ Common.DNS.Domain }}"
    Server1:
      IPv4: "{{ Common.DNS.Server1.IPv4 }}"
      IPv6: "{{ Common.DNS.Server1.IPv6 }}"
    Server2:
      IPv4: "{{ Common.DNS.Server2.IPv4 }}"
      IPv6: "{{ Common.DNS.Server2.IPv6 }}"
  NTP:
    Server1:
      IPv4: "{{ Common.NTP.Server1.IPv4 }}"
      IPv6: "{{ Common.NTP.Server1.IPv6 }}"
    Server2:
      IPv4: "{{ Common.NTP.Server2.IPv4 }}"
      IPv6: "{{ Common.NTP.Server2.IPv6 }}"
  Syslog:
    Protocol: "{{ Common.Syslog.Protocol }}"
    Port: "{{ Common.Syslog.Port }}"
    IPv4: "{{ Common.Syslog.IPv4 }}"
    IPv6: "{{ Common.Syslog.IPv6 }}"
  DiskProvisioning: "{{ Common.DiskProvisioning }}"
  NFS:
    Server:
      IPv4: "{{ Common.NFS.Server.IPv4 }}"
      IPv6: "{{ Common.NFS.Server.IPv6 }}"
    Datastore: "{{ Common.NFS.Datastore }}"
    Path: "{{ Common.NFS.Path }}"
    Type: "{{ Common.NFS.Type }}"


##
## Determine effective Target settings to use throughout deployment script
##
Target:
  Deployment:     "{{ TargetConfig.Deployment }}"
  FQDN:           "{{ TargetConfig[TargetConfig.Deployment].FQDN }}"
  User:           "{{ TargetConfig[TargetConfig.Deployment].User }}"
  Password:       "{{ TargetConfig[TargetConfig.Deployment].Password }}"
  vSwitch:        "{{ TargetConfig[TargetConfig.Deployment].vSwitch }}"
  vSwitchVersion: "{{ TargetConfig[TargetConfig.Deployment].vSwitchVersion }}"
  DataCenter:     "{{ TargetConfig[TargetConfig.Deployment].DataCenter }}"
  Cluster:        "{{ TargetConfig[TargetConfig.Deployment].Cluster }}"
  Datastore:      "{{ TargetConfig[TargetConfig.Deployment].Datastore }}"
  VMFolder:       "{{ TargetConfig[TargetConfig.Deployment].VMFolder }}"
  ISOFolder:      "{{ TargetConfig[TargetConfig.Deployment].ISOFolder }}"
  ISOMount:       "{{ TargetConfig[TargetConfig.Deployment].ISOMount }}"
  TempFolder:     "{{ TargetConfig[TargetConfig.Deployment].TempFolder }}"
  VarsFolder:     "{{ TargetConfig[TargetConfig.Deployment].VarsFolder }}"
  PortGroup:
    RouterUplink: "{{ TargetConfig[TargetConfig.Deployment]['PortGroup'].RouterUplink }}"
    Management:
      Name:       "{{ TargetConfig[TargetConfig.Deployment]['PortGroup']['Management'].Name }}"
      VLAN:       "{{ TargetConfig[TargetConfig.Deployment]['PortGroup']['Management'].VLAN }}"
    Trunk:
      Name:       "{{ TargetConfig[TargetConfig.Deployment]['PortGroup']['Trunk'].Name }}"
      VLAN:       "{{ TargetConfig[TargetConfig.Deployment]['PortGroup']['Trunk'].VLAN }}"


Net:
  Management:
    Offset: {{ Net.Management.Offset }}
    VLAN: "{{ Net.Management.VLAN }}"
    IPv4:
      Prefix: {{ Net.Management.IPv4.Prefix }}
      Network: "{{ Net.Management.IPv4.Network }}"
    IPv6:
      Prefix: {{ Net.Management.IPv6.Prefix }}
      Network: "{{ Net.Management.IPv6.Network }}"
  vMotion:
    Offset: {{ Net.vMotion.Offset }}
    VLAN: "{{ Net.vMotion.VLAN }}"
    IPv4:
      Prefix: {{ Net.vMotion.IPv4.Prefix }}
      Network: "{{ Net.vMotion.IPv4.Network }}"
    IPv6:
      Prefix: {{ Net.vMotion.IPv6.Prefix }}
      Network: "{{ Net.vMotion.IPv6.Network }}"
  vSAN:
    Offset: {{ Net.vSAN.Offset }}
    VLAN: "{{ Net.vSAN.VLAN }}"
    IPv4:
      Prefix: {{ Net.vSAN.IPv4.Prefix }}
      Network: "{{ Net.vSAN.IPv4.Network }}"
    IPv6:
      Prefix: {{ Net.vSAN.IPv6.Prefix }}
      Network: "{{ Net.vSAN.IPv6.Network }}"
  IPStorage:
    Offset: {{ Net.IPStorage.Offset }}
    VLAN: "{{ Net.IPStorage.VLAN }}"
    IPv4:
      Prefix: {{ Net.IPStorage.IPv4.Prefix }}
      Network: "{{ Net.IPStorage.IPv4.Network }}"
    IPv6:
      Prefix: {{ Net.IPStorage.IPv6.Prefix }}
      Network: "{{ Net.IPStorage.IPv6.Network }}"
  Transport:
    Offset: {{ Net.Transport.Offset }}
    VLAN: "{{ Net.Transport.VLAN }}"
    IPv4:
      Prefix: {{ Net.Transport.IPv4.Prefix }}
      Network: "{{ Net.Transport.IPv4.Network }}"
    IPv6:
      Prefix: {{ Net.Transport.IPv6.Prefix }}
      Network: "{{ Net.Transport.IPv6.Network }}"
  ServiceVM:
    Offset: {{ Net.ServiceVM.Offset }}
    VLAN: "{{ Net.ServiceVM.VLAN }}"
    IPv4:
      Prefix: {{ Net.ServiceVM.IPv4.Prefix }}
      Network: "{{ Net.ServiceVM.IPv4.Network }}"
    IPv6:
      Prefix: {{ Net.ServiceVM.IPv6.Prefix }}
      Network: "{{ Net.ServiceVM.IPv6.Network }}"
  NSXEdgeUplink1:
    Offset: {{ Net.NSXEdgeUplink1.Offset }}
    VLAN: "{{ Net.NSXEdgeUplink1.VLAN }}"
    IPv4:
      Prefix: {{ Net.NSXEdgeUplink1.IPv4.Prefix }}
      Network: "{{ Net.NSXEdgeUplink1.IPv4.Network }}"
    IPv6:
      Prefix: {{ Net.NSXEdgeUplink1.IPv6.Prefix }}
      Network: "{{ Net.NSXEdgeUplink1.IPv6.Network }}"
  NSXEdgeUplink2:
    Offset: {{ Net.NSXEdgeUplink2.Offset }}
    VLAN: "{{ Net.NSXEdgeUplink2.VLAN }}"
    IPv4:
      Prefix: {{ Net.NSXEdgeUplink2.IPv4.Prefix }}
      Network: "{{ Net.NSXEdgeUplink2.IPv4.Network }}"
    IPv6:
      Prefix: {{ Net.NSXEdgeUplink2.IPv6.Prefix }}
      Network: "{{ Net.NSXEdgeUplink2.IPv6.Network }}"
  RTEP:
    Offset: {{ Net.RTEP.Offset }}
    VLAN: "{{ Net.RTEP.VLAN }}"
    IPv4:
      Prefix: {{ Net.RTEP.IPv4.Prefix }}
      Network: "{{ Net.RTEP.IPv4.Network }}"
    IPv6:
      Prefix: {{ Net.RTEP.IPv6.Prefix }}
      Network: "{{ Net.RTEP.IPv6.Network }}"
  VMNetwork:
    Offset: {{ Net.VMNetwork.Offset }}
    VLAN: "{{ Net.VMNetwork.VLAN }}"
    IPv4:
      Prefix: {{ Net.VMNetwork.IPv4.Prefix }}
      Network: "{{ Net.VMNetwork.IPv4.Network }}"
    IPv6:
      Prefix: {{ Net.VMNetwork.IPv6.Prefix }}
      Network: "{{ Net.VMNetwork.IPv6.Network }}"


Nested_Router:
  Name: "{{ Nested_Router.Name }}"
  Protocol: "{{ Nested_Router | upper }}"
  Interface:
    Uplink:
      PortGroup: "{{ Nested_Router.Interface.Uplink.PortGroup }}"
      IPv4:
        Address: "{{ Nested_Router.Interface.Uplink.IPv4.Address }}"
        Prefix:  {{ Nested_Router.Interface.Uplink.IPv4.Prefix }}
        Gateway: "{{ Nested_Router.Interface.Uplink.IPv4.Gateway }}"
      IPv6:
        Address: "{{ Nested_Router.Interface.Uplink.IPv6.Address }}"
        Prefix:  {{ Nested_Router.Interface.Uplink.IPv6.Prefix }}
    Management:
      VLAN: "{{ Nested_Router.Interface.Management.VLAN }}"
      IPv4:
        Address: "{{ Nested_Router.Interface.Management.IPv4.Address }}"
        Prefix:  {{ Nested_Router.Interface.Management.IPv4.Prefix }}
      IPv6:
        Address: "{{ Nested_Router.Interface.Management.IPv6.Address }}"
        Prefix:  {{ Nested_Router.Interface.Management.IPv6.Prefix }}
    vMotion:
      VLAN: "{{ Nested_Router.Interface.vMotion.VLAN }}"
      IPv4:
        Address: "{{ Nested_Router.Interface.vMotion.IPv4.Address }}"
        Prefix:  {{ Nested_Router.Interface.vMotion.IPv4.Prefix }}
      IPv6:
        Address: "{{ Nested_Router.Interface.vMotion.IPv6.Address }}"
        Prefix:  {{ Nested_Router.Interface.vMotion.IPv6.Prefix }}
    vSAN:
      VLAN: "{{ Nested_Router.Interface.vSAN.VLAN }}"
      IPv4:
        Address: "{{ Nested_Router.Interface.vSAN.IPv4.Address }}"
        Prefix:  {{ Nested_Router.Interface.vSAN.IPv4.Prefix }}
      IPv6:
        Address: "{{ Nested_Router.Interface.vSAN.IPv6.Address }}"
        Prefix:  {{ Nested_Router.Interface.vSAN.IPv6.Prefix }}
    IPStorage:
      VLAN: "{{ Nested_Router.Interface.IPStorage.VLAN }}"
      IPv4:
        Address: "{{ Nested_Router.Interface.IPStorage.IPv4.Address }}"
        Prefix:  {{ Nested_Router.Interface.IPStorage.IPv4.Prefix }}
      IPv6:
        Address: "{{ Nested_Router.Interface.IPStorage.IPv6.Address }}"
        Prefix:  {{ Nested_Router.Interface.IPStorage.IPv6.Prefix }}
    Transport:
      VLAN: "{{ Nested_Router.Interface.Transport.VLAN }}"
      IPv4:
        Address: "{{ Nested_Router.Interface.Transport.IPv4.Address }}"
        Prefix:  {{ Nested_Router.Interface.Transport.IPv4.Prefix }}
      IPv6:
        Address: "{{ Nested_Router.Interface.Transport.IPv6.Address }}"
        Prefix:  {{ Nested_Router.Interface.Transport.IPv6.Prefix }}
    ServiceVM:
      VLAN: "{{ Nested_Router.Interface.ServiceVM.VLAN }}"
      IPv4:
        Address: "{{ Nested_Router.Interface.ServiceVM.IPv4.Address }}"
        Prefix:  {{ Nested_Router.Interface.ServiceVM.IPv4.Prefix }}
      IPv6:
        Address: "{{ Nested_Router.Interface.ServiceVM.IPv6.Address }}"
        Prefix:  {{ Nested_Router.Interface.ServiceVM.IPv6.Prefix }}
    NSXEdgeUplink1:
      VLAN: "{{ Nested_Router.Interface.NSXEdgeUplink1.VLAN }}"
      IPv4:
        Address: "{{ Nested_Router.Interface.NSXEdgeUplink1.IPv4.Address }}"
        Prefix:  {{ Nested_Router.Interface.NSXEdgeUplink1.IPv4.Prefix }}
      IPv6:
        Address: "{{ Nested_Router.Interface.NSXEdgeUplink1.IPv6.Address }}"
        Prefix:  {{ Nested_Router.Interface.NSXEdgeUplink1.IPv6.Prefix }}
    NSXEdgeUplink2:
      VLAN: "{{ Nested_Router.Interface.NSXEdgeUplink2.VLAN }}"
      IPv4:
        Address: "{{ Nested_Router.Interface.NSXEdgeUplink2.IPv4.Address }}"
        Prefix:  {{ Nested_Router.Interface.NSXEdgeUplink2.IPv4.Prefix }}
      IPv6:
        Address: "{{ Nested_Router.Interface.NSXEdgeUplink2.IPv6.Address }}"
        Prefix:  {{ Nested_Router.Interface.NSXEdgeUplink2.IPv6.Prefix }}
    RTEP:
      VLAN: "{{ Nested_Router.Interface.RTEP.VLAN }}"
      IPv4:
        Address: "{{ Nested_Router.Interface.RTEP.IPv4.Address }}"
        Prefix:  {{ Nested_Router.Interface.RTEP.IPv4.Prefix }}
      IPv6:
        Address: "{{ Nested_Router.Interface.RTEP.IPv6.Address }}"
        Prefix:  {{ Nested_Router.Interface.RTEP.IPv6.Prefix }}
    VMNetwork:
      VLAN: "{{ Nested_Router.Interface.VMNetwork.VLAN }}"
      IPv4:
        Address: "{{ Nested_Router.Interface.VMNetwork.IPv4.Address }}"
        Prefix:  {{ Nested_Router.Interface.VMNetwork.IPv4.Prefix }}
      IPv6:
        Address: "{{ Nested_Router.Interface.VMNetwork.IPv6.Address }}"
        Prefix:  {{ Nested_Router.Interface.VMNetwork.IPv6.Prefix }}
  NTP:
    Servers:
{% for NTPServer in Nested_Router.NTP.Servers %}
    - Name: "{{ NTPServer.Name }}"
      IPv4:
        Address: "{{ NTPServer.IPv4.Address }}"
      IPv6:
        Address: "{{ NTPServer.IPv6.Address }}"
{% endfor %}
  OSPF:
    Area: {{ Nested_Router.OSPF.Area }}
    RouterID: "{{ Nested_Router.OSPF.RouterID }}"
  BGP:
    ASN:  {{ Nested_Router.BGP.ASN }}
    RouterID: "{{ Nested_Router.BGP.RouterID }}"
    Neighbors:
{% for Neighbor in Nested_Router.BGP.Neighbors %}
    - Name: "{{ Neighbor.Name }}"
      ASN: {{ Neighbor.ASN }}
      IPv4:
        Address: "{{ Neighbor.IPv4.Address }}"
        Prefix:  {{ Neighbor.IPv4.Prefix }}
      IPv6:
        Address: "{{ Neighbor.IPv6.Address }}"
        Prefix:  {{ Neighbor.IPv6.Prefix }}
{% endfor %}


{# Create Nested_Clusters #}
Nested_Clusters:
{% for ClusterName, ClusterOptions in Nested_Clusters.iteritems() %}
  {{ ClusterName }}:
{% for key, value in ClusterOptions.iteritems() %}
    {{ key }}: {{ value }}
{% endfor %}
{% endfor %}


{# Create Nested_ESXi #}
Nested_ESXi:
  HardwareSettings:
    Management:
      CPU: 5
      CoresPerSocket: 5
      Memory: 16384
      BootDiskSize: 8
      CreateVMFS: false
      vSAN:
        CacheSize: 20
        CapacitySize: 180
    Compute-A:
      CPU: 8
      CoresPerSocket: 8
      Memory: 32768
      BootDiskSize: 8
      CreateVMFS: false
      vSAN:
        CacheSize: 20
        CapacitySize: 180
    Edge:
      CPU: 8
      CoresPerSocket: 8
      Memory: 65536
      BootDiskSize: 8
      CreateVMFS: false
      vSAN:
        CacheSize: 20
        CapacitySize: 180

  Hosts:
    ESXi11:
      Cluster: Management
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-11.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.11{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-11"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.11"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::11"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.11"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::11"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.11"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::11"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.11"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::11"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"

    ESXi12:
      Cluster: Management
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-12.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.12{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-12"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.12"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::12"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.12"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::12"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.12"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::12"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.12"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::12"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"

    ESXi13:
      Cluster: Management
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-13.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.13{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-13"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.13"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::13"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.13"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::13"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.13"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::13"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.13"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::13"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"

    ESXi21:
      Cluster: Compute-A
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-21.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.21{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-21"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.21"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::21"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.21"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::21"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.21"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::21"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.21"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::21"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"

    ESXi22:
      Cluster: Compute-A
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-22.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.22{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-22"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.22"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::22"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.22"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::22"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.22"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::22"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.22"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::22"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"

    ESXi23:
      Cluster: Compute-A
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-23.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.23{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-23"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.23"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::23"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.23"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::23"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.23"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::23"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.23"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::23"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"

    ESXi91:
      Cluster: Edge
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-91.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.91{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-91"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.91"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::91"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.91"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::91"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.91"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::91"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.91"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::91"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"

    ESXi92:
      Cluster: Edge
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-92.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.92{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-92"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.92"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::92"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.92"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::92"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.92"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::92"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.92"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::92"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"

    ESXi93:
      Cluster: Edge
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-93.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.93{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-93"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.93"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::93"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.93"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::93"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.93"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::93"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.93"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::93"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"


Nested_vCenter:
  Question:
    EULA:
      Answer: true
      Enabled: true
    CEIP:
      Answer: true
      Enabled: false
  User: "administrator@vsphere.local"
  Password: "{{ Common.Password.Nested }}"
  DeploymentSize: small
  VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-vCenter"
  FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-vCenter.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.5{% endif %}"
  Address:
    IPv4:
      Address: "{{ Net.Management.IPv4.Network }}.5"
      Prefix:  "{{ Net.Management.IPv4.Prefix }}"
      Gateway: "{{ Net.Management.IPv4.Network }}.1"
    IPv6:
      Address: "{{ Net.Management.IPv6.Network }}::5"
      Prefix:  "{{ Net.Management.IPv6.Prefix }}"
  SSO:
    Domain: vsphere.local
    Site: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Site"
    ReplicationPartner: ''
  DataCenter: "Pod-{{ '%03d'|format(Pod.Number|int) }}-DataCenter"
  Networking:
    vSwitch:
      Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-vSwitch"
      Clusters:
      - Management
      - Compute-A
      - Edge
      Config:
        Version: "{{ Software.VMware.ESXi.Installers[Deploy.Software.ESXi.Version].vSwitch }}"
        NumberOfUplinks: 2
        MTU: 9000
        LinkDiscoveryProtocol:
          Type: lldp
          Operation: both
      PortGroup:
        Management:
          Name: Management
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.Management.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        vMotion:
          Name: vMotion
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.vMotion.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        vSAN:
          Name: vSAN
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.vSAN.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        IPStorage:
          Name: IPStorage
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.IPStorage.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        Transport:
          Name: Transport
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.Transport.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        ServiceVMs:
          Name: ServiceVMs
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.ServiceVM.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        NSXEdgeUplink1:
          Name: NSXEdgeUplink1
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.NSXEdgeUplink1.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        NSXEdgeUplink2:
          Name: NSXEdgeUplink2
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.NSXEdgeUplink2.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        VMNetwork:
          Name: VMNetwork
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.VMNetwork.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false


Nested_NSXT:
  Question:
    EULA:
      Answer: true
      Enabled: true
    CEIP:
      Answer: true
      Enabled: false
  Credentials:
    root:
      Name: root
      Password: "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
    admin:
      Name: admin
      Password: "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
    audit:
      Name: audit
      Password: "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
  Components:
    GlobalManager:
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-GM"
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-GM.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.7{% endif %}"
      Deployment:
        Size: small
        role: NSX Global Manager
        EnableSSH: "{{ Deploy.EnableSSH }}"
        AllowRootSSH: "{{ Deploy.EnableSSH }}"
      Address:
        IPv4:
          Address: "{{ Net.Management.IPv4.Network }}.7"
          Prefix:  "{{ Net.Management.IPv4.Prefix }}"
          Gateway: "{{ Net.Management.IPv4.Network }}.1"
        IPv6:
          Address: "{{ Net.Management.IPv6.Network }}::7"
          Prefix:  "{{ Net.Management.IPv6.Prefix }}"
    LocalManager:
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-LM"
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-LM.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.8{% endif %}"
      Deployment:
        Size: small
        Role: NSX Manager
        SiteName: "NSX-Site-{{ '%03d'|format(Pod.Number|int) }}"
        EnableSSH: "{{ Deploy.EnableSSH }}"
        AllowRootSSH: "{{ Deploy.EnableSSH }}"
      Address:
        IPv4:
          Address: "{{ Net.Management.IPv4.Network }}.8"
          Prefix:  "{{ Net.Management.IPv4.Prefix }}"
          Gateway: "{{ Net.Management.IPv4.Network }}.1"
        IPv6:
          Address: "{{ Net.Management.IPv6.Network }}::8"
          Prefix:  "{{ Net.Management.IPv6.Prefix }}"
    CloudServicesManager:
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-CSM"
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-CSM.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.9{% endif %}"
      Deployment:
        Size: small
        role: "nsx-cloud-service-manager"
        EnableSSH: "{{ Deploy.EnableSSH }}"
        AllowRootSSH: "{{ Deploy.EnableSSH }}"
      Address:
        IPv4:
          Address: "{{ Net.Management.IPv4.Network }}.9"
          Prefix:  "{{ Net.Management.IPv4.Prefix }}"
          Gateway: "{{ Net.Management.IPv4.Network }}.1"
        IPv6:
          Address: "{{ Net.Management.IPv6.Network }}::9"
          Prefix:  "{{ Net.Management.IPv6.Prefix }}"

##
## Changes to some of the 'Vars' variables below may require changes to Nested_NSXT below
##
  Vars:
    NVDSName:          "NVDS-1"
    Tier0_Name:        "T0-Gateway-01"
    TZ_VLAN_Name:      "TZ-VLAN"
    TZ_Overlay_Name:   "TZ-Overlay"
    TZ_Edge_Name:      "TZ-Edge"
    TEP_Pool_Name:     "Pod-{{ '%03d'|format(Pod.Number|int) }}-TEP-Pool"
    TN_Profile_Name:   "TNP-ESXi-Hosts"
    EdgeNodes:
      Password:        "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
      vSphereCluster:  "Edge"
      EdgeClusterName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-T0-Edge-Cluster-01"
      EdgeNode1:
        Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-T0-EdgeVM-01"
        Host: "{{ Nested_ESXi.Hosts.ESXi91.FQDN }}"
      EdgeNode2:
        Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-T0-EdgeVM-02"
        Host: "{{ Nested_ESXi.Hosts.ESXi92.FQDN }}"

  Networking:
    IPPools:
    - Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-TEP-Pool"
      Description: IP Pool for TEPs
      DNS:
        Server:   "{{ Common.DNS.Server1.IPv4 }}"
        Domain:   "{{ Common.DNS.Domain }}"
      Tags:
        Tag:
        Scope:
      IPRanges:
      - Start:   "{{ Net.Transport.IPv4.Network }}.10"
        End:     "{{ Net.Transport.IPv4.Network }}.99"
        Prefix:  "{{ Net.Transport.IPv4.Prefix }}"
        Gateway: "{{ Net.Transport.IPv4.Network }}.1"
      - Start:   "{{ Net.Transport.IPv6.Network }}::10"
        End:     "{{ Net.Transport.IPv6.Network }}::99"
        Prefix:  "{{ Net.Transport.IPv6.Prefix }}"
        Gateway:
    - Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-RTEP-Pool"
      Description: IP Pool for Remote TEPs
      DNS:
        Server:   "{{ Common.DNS.Server1.IPv4 }}"
        Domain:   "{{ Common.DNS.Domain }}"
      Tags:
        Tag:
        Scope:
      IPRanges:
      - Start:   "{{ Net.RTEP.IPv4.Network }}.10"
        End:     "{{ Net.RTEP.IPv4.Network }}.99"
        Prefix:  "{{ Net.RTEP.IPv4.Prefix }}"
        Gateway: "{{ Net.RTEP.IPv4.Network }}.1"
      - Start:   "{{ Net.RTEP.IPv6.Network }}::10"
        End:     "{{ Net.RTEP.IPv6.Network }}::99"
        Prefix:  "{{ Net.RTEP.IPv6.Prefix }}"
        Gateway:
    Segments:
    - Name: "SEG-T0-Edge-Uplink1_VLAN-{{ Net.NSXEdgeUplink1.VLAN }}"
      AdminStateEnabled: true
      Description: "NSX T0-Edge Uplink 1"
      TransportZone: "TZ-Edge"
      VLANS: "{{ Net.NSXEdgeUplink1.VLAN }}"
    - Name: "SEG-T0-Edge-Uplink2_VLAN-{{ Net.NSXEdgeUplink2.VLAN }}"
      AdminStateEnabled: true
      Description: "NSX T0-Edge Uplink 2"
      TransportZone: "TZ-Edge"
      VLANS: "{{ Net.NSXEdgeUplink2.VLAN }}"
    - Name: "SEG-Web"
      AdminStateEnabled: true
      Description: Web Segment
      TransportZone: "TZ-Overlay"
      VLANS:
    - Name: "SEG-App"
      AdminStateEnabled: true
      Description: App Segment
      TransportZone: "TZ-Overlay"
      VLANS:
    - Name: "SEG-DB"
      AdminStateEnabled: true
      Description: DB Segment
      TransportZone: "TZ-Overlay"
      VLANS:

  System:
    Fabric:
      TransportZone:
        TZ-VLAN:
          Type: VLAN
          Description:
          Switch: "NVDS-1"
          TeamingPolicies: []
        TZ-Edge:
          Type: VLAN
          Description: Edge Cluster Peering Segments
          Switch: "NVDS-1"
          TeamingPolicies: []
        TZ-Overlay:
          Type: OVERLAY
          Description: GEVEVE Overlay Transport Zone
          Switch: "NVDS-1"
          TeamingPolicies: []
