---
- hosts: localhost
  gather_facts: false
  tasks:

###########################################  Start IPv4   ############################################

    - name: Display IPv4 Reverse DNS for 10.203
      debug:
        msg: "{{ Pod.BaseNetwork.IPv4 | ipaddr('revdns') }}"

##
## IMPORTANT: Notice this DNS path is relative (No final '.', which means relative)
##
    - name: Display IPv4 Reverse DNS for 10.203 (Without DNS root '.')
      debug:
        msg: "{{ Pod.BaseNetwork.IPv4 | ipaddr('revdns') | regex_replace('^.{4}(.*).$', '\\1') }}"

##
## IMPORTANT: Notice this DNS path is absolute (Includes final '.', indicating absolute)
##
    - name: Display IPv4 Reverse DNS for 10.203 (Absolute path with DNS root '.')
      debug:
        msg: "{{ Pod.BaseNetwork.IPv4 | ipaddr('revdns') | regex_replace('^.{4}(.*)$', '\\1') }}"


###########################################  Start IPv6   ############################################

##
## "lower" filter not required, but added for safety in case ipaddr ever changes
##
    - name: Display IPv6 Reverse DNS for fd00:0000:0000...
      debug:
        msg: "{{ (Pod.BaseNetwork.IPv6 + '::') | lower | ipaddr('revdns') }}"

##
## IMPORTANT: Notice this DNS path is relative (No final '.', which means relative)
##
    - name: Display IPv6 Reverse DNS for fd00:0000:0000::/48 (Without DNS root '.')
      debug:
        msg: "{{ (Pod.BaseNetwork.IPv6 + '::') | lower | ipaddr('revdns') | regex_replace('^.{40}(.*).$', '\\1') }}"

##
## IMPORTANT: Notice this DNS path is absolute (Includes final '.', indicating absolute)
##
    - name: Display IPv6 Reverse DNS for fd00:0000:0000::/48 (Absolute path with DNS root '.')
      debug:
        msg: "{{ (Pod.BaseNetwork.IPv6 + '::') | lower | ipaddr('revdns') | regex_replace('^.{40}(.*)$', '\\1') }}"

##
## Obtain last two octets in proper order for Reverse DNS entry for Nested_Ubuntu host
##
    - name: Display PTR IP of Ubuntu  host
      debug:
        msg: "{{ Nested_Ubuntu.OS.Network.IPv4.Address | ipaddr('revdns') | regex_replace('(^[0-9]+.[0-9]+)..+$', '\\1') }}"
