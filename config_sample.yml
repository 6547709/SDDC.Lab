---
DEBUG:
  KeepConfigFiles: true
  KeepInstallerFiles: false
  DisplayVariables: true
  DisplayVariables_DNS: false
  DisplayDelayInSeconds: 10


Pod:
  Number: 230
  BaseNetwork:
    IPv4: '10.203'
    IPv6: "FD00:0000:0000"


Deploy:
  Router: true
  NSXT:
    GlobalManager: false
    LocalManager: true
    CloudServicesManager: false
    Edge: true
  IPv4: true
  IPv6: false
  UseNFS: false
  UseDNS: true
  EnableSSH: true
  Software:
    Options:
      UseLocalInstaller: true
      KeepNewInstallers: true
    vCenter:
      Vendor:  VMware
      Product: vCenter
      Version: '7.00A'
      Patch:   false
      Config:  "Pod-{{ '%03d'|format(Pod.Number|int) }}-vCenter.conf"
      Installer: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Installer-vCenter"
    ESXi:
      Vendor:  VMware
      Product: ESXi
      Version: '7.00'
      Patch:   false
      Config:  "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi.conf"
      Installer: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Installer-ESXi"
    NSXT:
      Vendor:  VMware
      Product: NSXT
      Version: '3.0.1'
      Patch:   false
      Config:  "Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT.conf"
      Installer: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Installer-NSXT"
    Router:
      Vendor:  VyOS
      Product: Router
      Version: Latest
      Patch:   false
      Config:  "Pod-{{ '%03d'|format(Pod.Number|int) }}-Router.conf"
      Installer: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Installer-Router"


##
## The 'Common' section are settings used by the various nested lab components, except for the Nested_Router.
## The physical real-world NTP time server that is used to obtain time for the lab is defined in the Nested_Router section.
## The DNS servers listed delow MUST be able to resolve DNS names on the public Internet.
##
Common:
  Password:
    Nested:   "VMware1!"
    Physical: "VMware1!"
  DNS:
    Domain: "SDDC.Lab"
    Server1:
      IPv4: "{{ Pod.BaseNetwork.IPv4 }}.0.5"                          # Replace this IP if using a different DNS server than the suggested .5  server in the Router Uplink segment (MUST support Dynamic DNS Updates)
      IPv6: "{{ Pod.BaseNetwork.IPv6 }}:0::{{ '%04d'|format(5) }}"    # Replace this IP if using a different DNS server than the suggested ::5 server in the Router Uplink segment (MUST support Dynamic DNS Updates)
    Server2:
      IPv4: 
      IPv6: 
  NTP:
    Server1:
      IPv4: "10.200.0.10"
#      IPv4: "{{ Net.Management.IPv4.Network }}.1"                     # Replace with your IP address if Nested_Router.Version == "Legacy"
      IPv6: "{{ Net.Management.IPv6.Network }}::1"                    # Replace with your IP address if Nested_Router.Version == "Legacy"
    Server2:
      IPv4: "{{ Net.Management.IPv4.Network }}.1"                     # Replace with your IP address if Nested_Router.Version == "Legacy"
      IPv6: "{{ Net.Management.IPv6.Network }}::1"                    # Replace with your IP address if Nested_Router.Version == "Legacy"
  Syslog:
    Protocol: udp
    Port: 514
    IPv4: "10.203.100.26"
    IPv6: 
  DiskProvisioning: "thin"
  NFS:
    Server:
      IPv4: "192.168.0.12"
      IPv6: 
    Datastore: nfs01
    Path: "/nested_nfs01"
    Type: nfs


##
## Users should specify their deployment target settings in the 'TargetConfig' section
##
TargetConfig:
  Deployment: "Host"
  Host:
    FQDN: "Host32.NetLab.Home"
    User: "root"
    Password: "{{ Common.Password.Physical }}"
    vSwitch: "Pod-{{ '%03d'|format(Pod.Number|int) }}-vSwitch"
    vSwitchVersion: ""
    VLAN: "{{ Net.Management.VLAN }}"                                   ## *TBD* - Investigate why this is not in vCenter or PlaceHolder, and if it is being used anywyere
    DataCenter: "ha-datacenter"
    Cluster: ""
    Datastore: "Local_VMs"
    VMFolder: "ha-datacenter/vm"
    ISOFolder: "/Lab-ISO-Folder"
    ISOMount:   "/tmp/Pod-{{ '%03d'|format(Pod.Number|int) }}/iso"
    TempFolder: "/tmp/Pod-{{ '%03d'|format(Pod.Number|int) }}"
    VarsFolder: "/tmp/Pod-{{ '%03d'|format(Pod.Number|int) }}/vars"
    PortGroup:
      RouterUplink: "Lab-Routers"
      Management:
        Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Mgmt"
        VLAN: "{{ Net.Management.VLAN }}"
      Trunk:
        Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Trunk"
        VLAN: 4095
  vCenter:
    FQDN: "NetLab-vCenter.NetLab.Home"
    User: "administrator@vsphere.local"
    Password: "{{ Common.Password.Physical }}"
    vSwitch: "Lab-vDS"
    vSwitchVersion: 6.6.0
    DataCenter: "NetLab"
    Cluster: "Pod-Cluster"
    Datastore: "vsanDatastore"
    VMFolder: "Nested Labs/Pod-{{ '%03d'|format(Pod.Number|int) }}"
    ISOFolder: "/Lab-ISO-Folder"
    ISOMount:   "/tmp/Pod-{{ '%03d'|format(Pod.Number|int) }}/iso"
    TempFolder: "/tmp/Pod-{{ '%03d'|format(Pod.Number|int) }}"
    VarsFolder: "/tmp/Pod-{{ '%03d'|format(Pod.Number|int) }}/vars"
    PortGroup:
      RouterUplink: "Lab-Routers"
      Management:
        Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Mgmt"
        VLAN: "{{ Net.Management.VLAN }}"
      Trunk:
        Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Trunk"
        VLAN: "{{ Net.Management.VLAN }}-{{ Net.VMNetwork.VLAN }}"


##
## Determine effective Target settings to use throughout deployment script
##
#Target:
#  Deployment:     "{{ TargetConfig.Deployment }}"
#  FQDN:           "{{ TargetConfig[TargetConfig.Deployment].FQDN }}"
#  User:           "{{ TargetConfig[TargetConfig.Deployment].User }}"
#  Password:       "{{ TargetConfig[TargetConfig.Deployment].Password }}"
#  vSwitch:        "{{ TargetConfig[TargetConfig.Deployment].vSwitch }}"
#  vSwitchVersion: "{{ TargetConfig[TargetConfig.Deployment].vSwitchVersion }}"
#  DataCenter:     "{{ TargetConfig[TargetConfig.Deployment].DataCenter }}"
#  Cluster:        "{{ TargetConfig[TargetConfig.Deployment].Cluster }}"
#  Datastore:      "{{ TargetConfig[TargetConfig.Deployment].Datastore }}"
#  VMFolder:       "{{ TargetConfig[TargetConfig.Deployment].VMFolder }}"
#  ISOFolder:      "{{ TargetConfig[TargetConfig.Deployment].ISOFolder }}"
#  ISOMount:       "{{ TargetConfig[TargetConfig.Deployment].ISOMount }}"
#  TempFolder:     "{{ TargetConfig[TargetConfig.Deployment].TempFolder }}"
#  VarsFolder:     "{{ TargetConfig[TargetConfig.Deployment].VarsFolder }}"
#  PortGroup:
#    RouterUplink: "{{ TargetConfig[TargetConfig.Deployment]['PortGroup'].RouterUplink }}"
#    Management:
#      Name:       "{{ TargetConfig[TargetConfig.Deployment]['PortGroup']['Management'].Name }}"
#      VLAN:       "{{ TargetConfig[TargetConfig.Deployment]['PortGroup']['Management'].VLAN }}"
#    Trunk:
#      Name:       "{{ TargetConfig[TargetConfig.Deployment]['PortGroup']['Trunk'].Name }}"
#      VLAN:       "{{ TargetConfig[TargetConfig.Deployment]['PortGroup']['Trunk'].VLAN }}"


##
## Putting Host values directly into Target to speed up deployment
##
#Target:
#  Deployment: "Host"
#  FQDN: "Host32.NetLab.Home"
#  User: "root"
#  Password: "{{ Common.Password.Physical }}"
#  vSwitch: "Pod-{{ '%03d'|format(Pod.Number|int) }}-vSwitch"
#  vSwitchVersion: ""
#  VLAN: "{{ Net.Management.VLAN }}"
#  DataCenter: "ha-datacenter"
#  Cluster: ""
#  Datastore: "Local_VMs"
#  VMFolder: "ha-datacenter/vm"
#  ISOFolder: "/Lab-ISO-Folder"
#  ISOMount:   "/tmp/Pod-{{ '%03d'|format(Pod.Number|int) }}/iso"
#  TempFolder: "/tmp/Pod-{{ '%03d'|format(Pod.Number|int) }}"
#  VarsFolder: "/tmp/Pod-{{ '%03d'|format(Pod.Number|int) }}/vars"
#  PortGroup:
#    RouterUplink: "Lab-Routers"
#    Management:
#      Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Mgmt"
#      VLAN: "{{ Net.Management.VLAN }}"
#    Trunk:
#      Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Trunk"
#      VLAN: 4095



Net:
  Management:
    Offset: 0
    VLAN: "{{ Pod.Number + 0 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 0 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+0|int) }}"
  vMotion:
    Offset: 1
    VLAN: "{{ Pod.Number + 1 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 1 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+1|int) }}"
  vSAN:
    Offset: 2
    VLAN: "{{ Pod.Number + 2 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 2 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+2|int) }}"
  IPStorage:
    Offset: 3
    VLAN: "{{ Pod.Number + 3 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 3 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+3|int) }}"
  Transport:
    Offset: 4
    VLAN: "{{ Pod.Number + 4 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 4 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+4|int) }}"
  ServiceVM:
    Offset: 5
    VLAN: "{{ Pod.Number + 5 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 5 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+5|int) }}"
  NSXEdgeUplink1:
    Offset: 6
    VLAN: "{{ Pod.Number + 6 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 6 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+6|int) }}"
  NSXEdgeUplink2:
    Offset: 7
    VLAN: "{{ Pod.Number + 7 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 7 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+7|int) }}"
  RTEP:
    Offset: 8
    VLAN: "{{ Pod.Number + 8 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 8 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+8|int) }}"
  VMNetwork:
    Offset: 9
    VLAN: "{{ Pod.Number + 9 }}"
    IPv4:
      Prefix: 24
      Network: "{{ Pod.BaseNetwork.IPv4 }}.{{ Pod.Number + 9 }}"
    IPv6:
      Prefix: 64
      Network: "{{ Pod.BaseNetwork.IPv6 }}:{{ '%04d'|format(Pod.Number+9|int) }}"


Nested_Router:
  Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Router"
  Protocol: "OSPF"                          # Protocol options include "OSPF" or "Static"
  Interface:
    Uplink:
      PortGroup: "{{ Target.PortGroup.RouterUplink }}"
      IPv4:
        Address: "{{ Pod.BaseNetwork.IPv4 }}.0.{{ Pod.Number }}"
        Prefix: 24
        Gateway: "{{ Pod.BaseNetwork.IPv4 }}.0.1"
      IPv6:
        Address: "{{ Pod.BaseNetwork.IPv6 }}:0::{{ '%04d'|format(Pod.Number|int) }}"
        Prefix: 64
    Management:
      VLAN: "{{ Net.Management.VLAN }}"
      IPv4:
        Address: "{{ Net.Management.IPv4.Network }}.1"
        Prefix:  "{{ Net.Management.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.Management.IPv6.Network }}::1"
        Prefix:  "{{ Net.Management.IPv6.Prefix }}"
    vMotion:
      VLAN: "{{ Net.vMotion.VLAN }}"
      IPv4:
        Address: "{{ Net.vMotion.IPv4.Network }}.1"
        Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.vMotion.IPv6.Network }}::1"
        Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
    vSAN:
      VLAN: "{{ Net.vSAN.VLAN }}"
      IPv4:
        Address: "{{ Net.vSAN.IPv4.Network }}.1"
        Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.vSAN.IPv6.Network }}::1"
        Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
    IPStorage:
      VLAN: "{{ Net.IPStorage.VLAN }}"
      IPv4:
        Address: "{{ Net.IPStorage.IPv4.Network }}.1"
        Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.IPStorage.IPv6.Network }}::1"
        Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"
    Transport:
      VLAN: "{{ Net.Transport.VLAN }}"
      IPv4:
        Address: "{{ Net.Transport.IPv4.Network }}.1"
        Prefix:  "{{ Net.Transport.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.Transport.IPv6.Network }}::1"
        Prefix:  "{{ Net.Transport.IPv6.Prefix }}"
    ServiceVM:
      VLAN: "{{ Net.ServiceVM.VLAN }}"
      IPv4:
        Address: "{{ Net.ServiceVM.IPv4.Network }}.1"
        Prefix:  "{{ Net.ServiceVM.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.ServiceVM.IPv6.Network }}::1"
        Prefix:  "{{ Net.ServiceVM.IPv6.Prefix }}"
    NSXEdgeUplink1:
      VLAN: "{{ Net.NSXEdgeUplink1.VLAN }}"
      IPv4:
        Address: "{{ Net.NSXEdgeUplink1.IPv4.Network }}.1"
        Prefix:  "{{ Net.NSXEdgeUplink1.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.NSXEdgeUplink1.IPv6.Network }}::1"
        Prefix:  "{{ Net.NSXEdgeUplink1.IPv6.Prefix }}"
    NSXEdgeUplink2:
      VLAN: "{{ Net.NSXEdgeUplink2.VLAN }}"
      IPv4:
        Address: "{{ Net.NSXEdgeUplink2.IPv4.Network }}.1"
        Prefix:  "{{ Net.NSXEdgeUplink2.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.NSXEdgeUplink2.IPv6.Network }}::1"
        Prefix:  "{{ Net.NSXEdgeUplink2.IPv6.Prefix }}"
    RTEP:
      VLAN: "{{ Net.RTEP.VLAN }}"
      IPv4:
        Address: "{{ Net.RTEP.IPv4.Network }}.1"
        Prefix:  "{{ Net.RTEP.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.RTEP.IPv6.Network }}::1"
        Prefix:  "{{ Net.RTEP.IPv6.Prefix }}"
    VMNetwork:
      VLAN: "{{ Net.VMNetwork.VLAN }}"
      IPv4:
        Address: "{{ Net.VMNetwork.IPv4.Network }}.1"
        Prefix:  "{{ Net.VMNetwork.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.VMNetwork.IPv6.Network }}::1"
        Prefix:  "{{ Net.VMNetwork.IPv6.Prefix }}"
  NTP:
    Servers:
    - Name: Upstream NTP Server
      IPv4:
        Address: "pool.ntp.org"                   # If you do not permit NTP out to the Internet, please update this entry to point to your internal NTP server
      IPv6:
        Address: "pool.ntp.org"                   # If you do not permit NTP out to the Internet, please update this entry to point to your internal NTP server
  OSPF:
    Area: 666
    RouterID: "{{ Pod.BaseNetwork.IPv4 }}.0.{{ Pod.Number }}"
  BGP:
    ASN: 65000
    RouterID: "{{ Net.Management.IPv4.Network }}.1"
    Neighbors:
    - Name: "T0-EdgeVM-1-1"
      ASN: 65001
      IPv4:
        Address: "{{ Net.NSXEdgeUplink1.IPv4.Network }}.2"        # *TBD* -- This needs to be updated to reference the NSX Edge Gateway objects directly
        Prefix:  "{{ Net.NSXEdgeUplink1.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.NSXEdgeUplink1.IPv6.Network }}::2"       # *TBD* -- This needs to be updated to reference the NSX Edge Gateway objects directly
        Prefix:  "{{ Net.NSXEdgeUplink1.IPv6.Prefix }}"
    - Name: "T0-EdgeVM-1-2"
      ASN: 65001
      IPv4:
        Address: "{{ Net.NSXEdgeUplink2.IPv4.Network }}.2"        # *TBD* -- This needs to be updated to reference the NSX Edge Gateway objects directly
        Prefix:  "{{ Net.NSXEdgeUplink2.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.NSXEdgeUplink2.IPv6.Network }}::2"       # *TBD* -- This needs to be updated to reference the NSX Edge Gateway objects directly
        Prefix:  "{{ Net.NSXEdgeUplink2.IPv6.Prefix }}"
    - Name: "T0-EdgeVM-2-1"
      ASN: 65001
      IPv4:
        Address: "{{ Net.NSXEdgeUplink1.IPv4.Network }}.3"        # *TBD* -- This needs to be updated to reference the NSX Edge Gateway objects directly
        Prefix:  "{{ Net.NSXEdgeUplink1.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.NSXEdgeUplink1.IPv6.Network }}::3"       # *TBD* -- This needs to be updated to reference the NSX Edge Gateway objects directly
        Prefix:  "{{ Net.NSXEdgeUplink1.IPv6.Prefix }}"
    - Name: "T0-EdgeVM-2-2"
      ASN: 65001
      IPv4:
        Address: "{{ Net.NSXEdgeUplink2.IPv4.Network }}.3"        # *TBD* -- This needs to be updated to reference the NSX Edge Gateway objects directly
        Prefix:  "{{ Net.NSXEdgeUplink2.IPv4.Prefix }}"
      IPv6:
        Address: "{{ Net.NSXEdgeUplink2.IPv6.Network }}::3"       # *TBD* -- This needs to be updated to reference the NSX Edge Gateway objects directly
        Prefix:  "{{ Net.NSXEdgeUplink2.IPv6.Prefix }}"


Nested_Clusters:
  Management:
    DRS: true
    HA: false
    vSAN: true
    vsanDatastore: Management_vSAN
    Prep_NSX: false
    DeployHosts: false
  Compute-A:
    DRS: true
    HA: false
    vSAN: true
    vsanDatastore: Compute-A_vSAN
    Prep_NSX: true
    DeployHosts: true
  Edge:
    DRS: true
    HA: false
    vSAN: true
    vsanDatastore: Edge_vSAN
    Prep_NSX: false
    DeployHosts: true


Nested_ESXi:
  HardwareSettings:
    Management:
      CPU: 5
      CoresPerSocket: 5
      Memory: 16384
      BootDiskSize: 8
      CreateVMFS: false
      vSAN:
        CacheSize: 20
        CapacitySize: 180
    Compute-A:
      CPU: 8
      CoresPerSocket: 8
      Memory: 32768
      BootDiskSize: 8
      CreateVMFS: false
      vSAN:
        CacheSize: 20
        CapacitySize: 180
    Edge:
      CPU: 8
      CoresPerSocket: 8
      Memory: 65536
      BootDiskSize: 8
      CreateVMFS: false
      vSAN:
        CacheSize: 20
        CapacitySize: 180

  Hosts:
    ESXi11:
      Cluster: Management
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-11.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.11{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-11"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.11"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::11"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.11"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::11"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.11"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::11"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.11"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::11"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"

    ESXi12:
      Cluster: Management
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-12.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.12{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-12"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.12"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::12"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.12"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::12"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.12"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::12"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.12"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::12"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"

    ESXi13:
      Cluster: Management
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-13.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.13{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-13"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.13"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::13"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.13"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::13"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.13"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::13"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.13"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::13"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"

    ESXi21:
      Cluster: Compute-A
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-21.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.21{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-21"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.21"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::21"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.21"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::21"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.21"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::21"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.21"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::21"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"

    ESXi22:
      Cluster: Compute-A
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-22.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.22{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-22"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.22"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::22"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.22"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::22"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.22"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::22"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.22"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::22"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"

    ESXi23:
      Cluster: Compute-A
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-23.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.23{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-23"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.23"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::23"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.23"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::23"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.23"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::23"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.23"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::23"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"

    ESXi91:
      Cluster: Edge
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-91.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.91{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-91"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.91"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::91"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.91"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::91"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.91"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::91"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.91"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::91"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"

    ESXi92:
      Cluster: Edge
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-92.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.92{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-92"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.92"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::92"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.92"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::92"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.92"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::92"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.92"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::92"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"

    ESXi93:
      Cluster: Edge
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-93.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.93{% endif %}"
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-ESXi-93"
      User: root
      Password: "{{ Common.Password.Nested }}"
      vmk:
        vmk0:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.Management.Name }}"
          VLAN: "{{ Net.Management.VLAN }}"
          MTU: 1500
          IPSettings: ipv4
          Stack: default
          Services:
          - Management
          Address:
            IPv4:
              Address: "{{ Net.Management.IPv4.Network }}.93"
              Prefix:  "{{ Net.Management.IPv4.Prefix }}"
              Gateway: "{{ Net.Management.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.Management.IPv6.Network }}::93"
              Prefix:  "{{ Net.Management.IPv6.Prefix }}"
        vmk1:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vMotion.Name }}"
          VLAN: "{{ Net.vMotion.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: vmotion
          Services:
          - vMotion
          - Fault Tolerance
          Address:
            IPv4:
              Address: "{{ Net.vMotion.IPv4.Network }}.93"
              Prefix:  "{{ Net.vMotion.IPv4.Prefix }}"
              Gateway: "{{ Net.vMotion.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vMotion.IPv6.Network }}::93"
              Prefix:  "{{ Net.vMotion.IPv6.Prefix }}"
        vmk2:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.vSAN.Name }}"
          VLAN: "{{ Net.vSAN.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services:
          - vSAN
          Address:
            IPv4:
              Address: "{{ Net.vSAN.IPv4.Network }}.93"
              Prefix:  "{{ Net.vSAN.IPv4.Prefix }}"
              Gateway: "{{ Net.vSAN.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.vSAN.IPv6.Network }}::93"
              Prefix:  "{{ Net.vSAN.IPv6.Prefix }}"
        vmk3:
          PortGroup: "{{ Nested_vCenter.Networking.vSwitch.PortGroup.IPStorage.Name }}"
          VLAN: "{{ Net.IPStorage.VLAN }}"
          MTU: 9000
          IPSettings: ipv4
          Stack: default
          Services: []
          Address:
            IPv4:
              Address: "{{ Net.IPStorage.IPv4.Network }}.93"
              Prefix:  "{{ Net.IPStorage.IPv4.Prefix }}"
              Gateway: "{{ Net.IPStorage.IPv4.Network }}.1"
            IPv6:
              Address: "{{ Net.IPStorage.IPv6.Network }}::93"
              Prefix:  "{{ Net.IPStorage.IPv6.Prefix }}"


Nested_vCenter:
  Question:
    EULA:
      Answer: true
      Enabled: true
    CEIP:
      Answer: true
      Enabled: false
  User: "administrator@vsphere.local"
  Password: "{{ Common.Password.Nested }}"
  DeploymentSize: small
  VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-vCenter"
  FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-vCenter.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.5{% endif %}"
  Address:
    IPv4:
      Address: "{{ Net.Management.IPv4.Network }}.5"
      Prefix:  "{{ Net.Management.IPv4.Prefix }}"
      Gateway: "{{ Net.Management.IPv4.Network }}.1"
    IPv6:
      Address: "{{ Net.Management.IPv6.Network }}::5"
      Prefix:  "{{ Net.Management.IPv6.Prefix }}"
  SSO:
    Domain: vsphere.local
    Site: "Pod-{{ '%03d'|format(Pod.Number|int) }}-Site"
    ReplicationPartner: ''
  DataCenter: "Pod-{{ '%03d'|format(Pod.Number|int) }}-DataCenter"
  Networking:
    vSwitch:
      Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-vSwitch"
      Clusters:
      - Management
      - Compute-A
      - Edge
      Config:
        Version: "{{ Software.VMware.ESXi.Installers[Deploy.Software.ESXi.Version].vSwitch }}"
        NumberOfUplinks: 2
        MTU: 9000
        LinkDiscoveryProtocol:
          Type: lldp
          Operation: both
      PortGroup:
        Management:
          Name: Management
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.Management.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        vMotion:
          Name: vMotion
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.vMotion.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        vSAN:
          Name: vSAN
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.vSAN.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        IPStorage:
          Name: IPStorage
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.IPStorage.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        Transport:
          Name: Transport
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.Transport.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        ServiceVMs:
          Name: ServiceVMs
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.ServiceVM.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        NSXEdgeUplink1:
          Name: NSXEdgeUplink1
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.NSXEdgeUplink1.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        NSXEdgeUplink2:
          Name: NSXEdgeUplink2
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.NSXEdgeUplink2.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false
        VMNetwork:
          Name: VMNetwork
          Create: true
          VLAN:
            Type: VLAN
            ID: "{{ Net.VMNetwork.VLAN }}"
          Security:
            MACAddressChanges: false
            ForgedTransmits: false
            PromiscuousMode: false


Nested_NSXT:
  Question:
    EULA:
      Answer: true
      Enabled: true
    CEIP:
      Answer: true
      Enabled: false
  Credentials:
    root:
      Name: root
      Password: "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
    admin:
      Name: admin
      Password: "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
    audit:
      Name: audit
      Password: "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
  Components:
    GlobalManager:
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-GM"
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-GM.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.7{% endif %}"
      Deployment:
        Size: small
        role: NSX Global Manager
        EnableSSH: "{{ Deploy.EnableSSH }}"
        AllowRootSSH: "{{ Deploy.EnableSSH }}"
      Address:
        IPv4:
          Address: "{{ Net.Management.IPv4.Network }}.7"
          Prefix:  "{{ Net.Management.IPv4.Prefix }}"
          Gateway: "{{ Net.Management.IPv4.Network }}.1"
        IPv6:
          Address: "{{ Net.Management.IPv6.Network }}::7"
          Prefix:  "{{ Net.Management.IPv6.Prefix }}"
    LocalManager:
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-LM"
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-LM.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.8{% endif %}"
      Deployment:
        Size: small
        Role: NSX Manager
        SiteName: "NSX-Site-{{ '%03d'|format(Pod.Number|int) }}"
        EnableSSH: "{{ Deploy.EnableSSH }}"
        AllowRootSSH: "{{ Deploy.EnableSSH }}"
      Address:
        IPv4:
          Address: "{{ Net.Management.IPv4.Network }}.8"
          Prefix:  "{{ Net.Management.IPv4.Prefix }}"
          Gateway: "{{ Net.Management.IPv4.Network }}.1"
        IPv6:
          Address: "{{ Net.Management.IPv6.Network }}::8"
          Prefix:  "{{ Net.Management.IPv6.Prefix }}"
    CloudServicesManager:
      VMName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-CSM"
      FQDN: "{% if Deploy.UseDNS %}Pod-{{ '%03d'|format(Pod.Number|int) }}-NSXT-CSM.{{ Common.DNS.Domain }}{% else %}{{ Net.Management.IPv4.Network }}.9{% endif %}"
      Deployment:
        Size: small
        role: "nsx-cloud-service-manager"
        EnableSSH: "{{ Deploy.EnableSSH }}"
        AllowRootSSH: "{{ Deploy.EnableSSH }}"
      Address:
        IPv4:
          Address: "{{ Net.Management.IPv4.Network }}.9"
          Prefix:  "{{ Net.Management.IPv4.Prefix }}"
          Gateway: "{{ Net.Management.IPv4.Network }}.1"
        IPv6:
          Address: "{{ Net.Management.IPv6.Network }}::9"
          Prefix:  "{{ Net.Management.IPv6.Prefix }}"

##
## Changes to some of the 'Vars' variables below may require changes to Nested_NSXT below
##
  Vars:
    NVDSName:          "NVDS-1"
    Tier0_Name:        "T0-Gateway-01"
    TZ_VLAN_Name:      "TZ-VLAN"
    TZ_Overlay_Name:   "TZ-Overlay"
    TZ_Edge_Name:      "TZ-Edge"
    TEP_Pool_Name:     "Pod-{{ '%03d'|format(Pod.Number|int) }}-TEP-Pool"
    TN_Profile_Name:   "TNP-ESXi-Hosts"
    EdgeNodes:
      Password:        "{{ Common.Password.Nested }}{{ Common.Password.Nested }}"
      vSphereCluster:  "Edge"
      EdgeClusterName: "Pod-{{ '%03d'|format(Pod.Number|int) }}-T0-Edge-Cluster-01"
      EdgeNode1:
        Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-T0-EdgeVM-01"
        Host: "{{ Nested_ESXi.Hosts.ESXi91.FQDN }}"
      EdgeNode2:
        Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-T0-EdgeVM-02"
        Host: "{{ Nested_ESXi.Hosts.ESXi92.FQDN }}"

  Networking:
    IPPools:
    - Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-TEP-Pool"
      Description: IP Pool for TEPs
      DNS:
        Server:   "{{ Common.DNS.Server1.IPv4 }}"
        Domain:   "{{ Common.DNS.Domain }}"
      Tags:
        Tag:
        Scope:
      IPRanges:
      - Start:   "{{ Net.Transport.IPv4.Network }}.10"
        End:     "{{ Net.Transport.IPv4.Network }}.99"
        Prefix:  "{{ Net.Transport.IPv4.Prefix }}"
        Gateway: "{{ Net.Transport.IPv4.Network }}.1"
      - Start:   "{{ Net.Transport.IPv6.Network }}::10"
        End:     "{{ Net.Transport.IPv6.Network }}::99"
        Prefix:  "{{ Net.Transport.IPv6.Prefix }}"
        Gateway:
    - Name: "Pod-{{ '%03d'|format(Pod.Number|int) }}-RTEP-Pool"
      Description: IP Pool for Remote TEPs
      DNS:
        Server:   "{{ Common.DNS.Server1.IPv4 }}"
        Domain:   "{{ Common.DNS.Domain }}"
      Tags:
        Tag:
        Scope:
      IPRanges:
      - Start:   "{{ Net.RTEP.IPv4.Network }}.10"
        End:     "{{ Net.RTEP.IPv4.Network }}.99"
        Prefix:  "{{ Net.RTEP.IPv4.Prefix }}"
        Gateway: "{{ Net.RTEP.IPv4.Network }}.1"
      - Start:   "{{ Net.RTEP.IPv6.Network }}::10"
        End:     "{{ Net.RTEP.IPv6.Network }}::99"
        Prefix:  "{{ Net.RTEP.IPv6.Prefix }}"
        Gateway:
    Segments:
    - Name: "SEG-T0-Edge-Uplink1_VLAN-{{ Net.NSXEdgeUplink1.VLAN }}"
      AdminStateEnabled: true
      Description: "NSX T0-Edge Uplink 1"
      TransportZone: "TZ-Edge"
      VLANS: "{{ Net.NSXEdgeUplink1.VLAN }}"
    - Name: "SEG-T0-Edge-Uplink2_VLAN-{{ Net.NSXEdgeUplink2.VLAN }}"
      AdminStateEnabled: true
      Description: "NSX T0-Edge Uplink 2"
      TransportZone: "TZ-Edge"
      VLANS: "{{ Net.NSXEdgeUplink2.VLAN }}"
    - Name: "SEG-Web"
      AdminStateEnabled: true
      Description: Web Segment
      TransportZone: "TZ-Overlay"
      VLANS:
    - Name: "SEG-App"
      AdminStateEnabled: true
      Description: App Segment
      TransportZone: "TZ-Overlay"
      VLANS:
    - Name: "SEG-DB"
      AdminStateEnabled: true
      Description: DB Segment
      TransportZone: "TZ-Overlay"
      VLANS:

  System:
    Fabric:
      TransportZone:
        TZ-VLAN:
          Type: VLAN
          Description:
          Switch: "NVDS-1"
          TeamingPolicies: []
        TZ-Edge:
          Type: VLAN
          Description: Edge Cluster Peering Segments
          Switch: "NVDS-1"
          TeamingPolicies: []
        TZ-Overlay:
          Type: OVERLAY
          Description: GEVEVE Overlay Transport Zone
          Switch: "NVDS-1"
          TeamingPolicies: []
